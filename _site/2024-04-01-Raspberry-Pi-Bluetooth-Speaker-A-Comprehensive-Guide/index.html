<!DOCTYPE html>
<html lang="en">
<!-- Beautiful Jekyll 6.0.1 | Copyright Dean Attali 2023 -->



<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  

  

  

  <title>Raspberry Pi Bluetooth Speaker: A Comprehensive Guide | Eric Lin</title>

  
  
  <meta name="author" content="Eric Lin">
  

  <meta name="description" content="This guide provides a detailed walkthrough on turning your Raspberry Pi into a Bluetooth speaker. You will discover how to use Yocto for building custom Linux distributions tailored to your specific needs. In the end, you’ll be able to stream music from your connected phone to your Raspberry Pi via...">

  

  

  
  <link rel="alternate" type="application/rss+xml" title="Eric Lin" href="http://localhost:4000/feed.xml">
  

  

  

  

  


  
    
      
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    
      
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">


    
  

  
    
      <link rel="stylesheet" href="/assets/css/bootstrap-social.css">
    
      <link rel="stylesheet" href="/assets/css/beautifuljekyll.css">
    
  

  

  
  
  

  

  
  <meta property="og:site_name" content="Eric Lin">
  <meta property="og:title" content="Raspberry Pi Bluetooth Speaker: A Comprehensive Guide | Eric Lin">
  <meta property="og:description" content="This guide provides a detailed walkthrough on turning your Raspberry Pi into a Bluetooth speaker. You will discover how to use Yocto for building custom Linux distributions tailored to your specific needs. In the end, you’ll be able to stream music from your connected phone to your Raspberry Pi via...">

  
  <meta property="og:image" content="http://localhost:4000/assets/img/eric.jpeg">
  

  
  <meta property="og:type" content="article">
  
  <meta property="og:article:author" content="Eric Lin">
  
  <meta property="og:article:published_time" content="2024-04-01T00:00:00-04:00">
  <meta property="og:url" content="http://localhost:4000/2024-04-01-Raspberry-Pi-Bluetooth-Speaker-A-Comprehensive-Guide/">
  <link rel="canonical" href="http://localhost:4000/2024-04-01-Raspberry-Pi-Bluetooth-Speaker-A-Comprehensive-Guide/">
  

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@">
  <meta name="twitter:creator" content="@">

  <meta property="twitter:title" content="Raspberry Pi Bluetooth Speaker: A Comprehensive Guide | Eric Lin">
  <meta property="twitter:description" content="This guide provides a detailed walkthrough on turning your Raspberry Pi into a Bluetooth speaker. You will discover how to use Yocto for building custom Linux distributions tailored to your specific needs. In the end, you’ll be able to stream music from your connected phone to your Raspberry Pi via...">

  
  <meta name="twitter:image" content="http://localhost:4000/assets/img/eric.jpeg">
  

  


  

  
  

  

</head>


<body>
  


  <nav class="navbar navbar-expand-xl navbar-light fixed-top navbar-custom top-nav-regular"><a class="navbar-brand" href="http://localhost:4000/">Eric Lin</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="main-navbar">
    <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="/">Blog</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/aboutme">About Me</a>
          </li>
        <li class="nav-item">
          <a class="nav-link" id="nav-search-link" href="#" title="Search">
            <span id="nav-search-icon" class="fa fa-search"></span>
            <span id="nav-search-text">Search</span>
          </a>
        </li></ul>
  </div>

  

  
    <div class="avatar-container">
      <div class="avatar-img-border">
        <a href="http://localhost:4000/">
          <img alt="Navigation bar avatar" class="avatar-img" src="/assets/img/eric.jpeg" />
        </a>
      </div>
    </div>
  

</nav>



<div id="beautifuljekyll-search-overlay">

  <div id="nav-search-exit" title="Exit search">✕</div>
  <input type="text" id="nav-search-input" placeholder="Search">
  <ul id="search-results-container"></ul>
  
  <script src="https://unpkg.com/simple-jekyll-search@latest/dest/simple-jekyll-search.min.js"></script>
  <script>
    var searchjson = '[ \
       \
        { \
          "title"    : "Raspberry Pi Bluetooth Speaker: A Comprehensive Guide", \
          "desc"     : "Raspberry Pi Bluetooth Speaker: A Comprehensive Guide", \
          "category" : "", \
          "url"      : "/2024-04-01-Raspberry-Pi-Bluetooth-Speaker-A-Comprehensive-Guide/", \
          "date"     : "April  1, 2024" \
        }, \
       \
        { \
          "title"    : "Build Linux Distribution for NXP i.MX 8 with Yocto Project", \
          "desc"     : "Build Linux Distribution for NXP i.MX 8 with Yocto Project", \
          "category" : "", \
          "url"      : "/2024-02-26-Build-Linux-Distribution-for-NXP-iMX-8-with-Yocto-Project/", \
          "date"     : "February 26, 2024" \
        }, \
       \
        { \
          "title"    : "How to Build Linux kernel for BeagleBone Black", \
          "desc"     : "How to Build Linux kernel for BeagleBone Black", \
          "category" : "", \
          "url"      : "/2024-02-06-How-to-Build-Linux-kernel-for-BeagleBone-Black/", \
          "date"     : "February  6, 2024" \
        }, \
       \
        { \
          "title"    : "Leetcode 1. Two sum solution", \
          "desc"     : "Leetcode 1. Two sum solution", \
          "category" : "", \
          "url"      : "/2023-11-23-Leetcode-1.-Two-sum-solution/", \
          "date"     : "November 23, 2023" \
        }, \
       \
       \
        { \
          "title"    : "About me", \
          "desc"     : "About me", \
          "category" : "page", \
          "url"      : "/aboutme/", \
          "date"     : "January 1, 1970" \
        }, \
       \
        { \
          "title"    : "Hi, I&#39;m Eric", \
          "desc"     : "Hi, I&#39;m Eric", \
          "category" : "page", \
          "url"      : "/", \
          "date"     : "January 1, 1970" \
        }, \
       \
        { \
          "title"    : "Tag Index", \
          "desc"     : "Tag Index", \
          "category" : "page", \
          "url"      : "/tags/", \
          "date"     : "January 1, 1970" \
        } \
       \
    ]';
    searchjson = JSON.parse(searchjson);

    var sjs = SimpleJekyllSearch({
      searchInput: document.getElementById('nav-search-input'),
      resultsContainer: document.getElementById('search-results-container'),
      json: searchjson
    });
  </script>
</div>





  



<header class="header-section ">
<div class="intro-header ">
  
  <div class="container-md">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
        <div class="post-heading">
          <h1>Raspberry Pi Bluetooth Speaker: A Comprehensive Guide</h1>
          
          
           
            
            <span class="post-meta">Posted on April 1, 2024</span>
            
            
          
        </div>
      </div>
    </div>
  </div>
  
  
</div>



</header>


<main class=" container-md ">
  <div class="row">
    <div class=" col-xl-8 offset-xl-2 col-lg-10 offset-lg-1 ">

      

      

      <div class="blog-post">
        <p>This guide provides a detailed walkthrough on turning your Raspberry Pi into a Bluetooth speaker. You will discover how to use Yocto for building custom Linux distributions tailored to your specific needs. In the end, you’ll be able to stream music from your connected phone to your Raspberry Pi via the Bluetooth A2DP profile, with Pulseaudio managing the audio routing.</p>

<h2 id="table-of-contents">Table of contents</h2>

<ul>
  <li><a href="#prerequisites">Prerequisites</a>
    <ul>
      <li><a href="#hardware">Hardware</a></li>
      <li><a href="#software">Software</a></li>
    </ul>
  </li>
  <li><a href="#setup-yocto-environment">Setup Yocto Environment</a>
    <ul>
      <li><a href="#download-required-repositories">Download Required Repositories</a></li>
    </ul>
  </li>
  <li><a href="#setup-build-environment">Setup Build Environment</a>
    <ul>
      <li><a href="#initialize-build-environment">Initialize Build Environment</a></li>
      <li><a href="#add-required-layers">Add Required Layers</a></li>
      <li><a href="#build-configuration-files">Build Configuration Files</a></li>
    </ul>
  </li>
  <li><a href="#runtime-configuration">Runtime Configuration</a>
    <ul>
      <li><a href="#system">System</a></li>
      <li><a href="#pulseaudio">PulseAudio</a></li>
      <li><a href="#alsa">ALSA</a></li>
      <li><a href="#bluetooth">Bluetooth</a></li>
      <li><a href="#optional-setting">Optional setting</a></li>
    </ul>
  </li>
  <li><a href="#debug">Debug</a>
    <ul>
      <li><a href="#pulseaudio-troubleshooting">PulseAudio troubleshooting</a></li>
    </ul>
  </li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<h3 id="hardware">Hardware</h3>
<ul>
  <li>Raspberry Pi (tested on Raspberry Pi 3B+)</li>
  <li>SD card</li>
  <li>A speaker with 3.5mm jack</li>
  <li>A BT USB dongle (recommended)</li>
</ul>

<h3 id="software">Software</h3>
<ul>
  <li>Choose a Yocto release based on your demand. Please check <a href="https://wiki.yoctoproject.org/wiki/Releases">Yocto Releases</a> for more details. (tested on kirkstone)</li>
  <li>Prepare your build host. Please see <a href="https://docs.yoctoproject.org/brief-yoctoprojectqs/index.html#compatible-linux-distribution">Yocto Project Quick Build</a> and <a href="https://docs.yoctoproject.org/ref-manual/system-requirements.html#system-requirements">System Requirements</a> for more info.</li>
</ul>

<h2 id="setup-yocto-environment">Setup Yocto Environment</h2>
<p>Before building the custom operating system image, we need to set up the Yocto environment.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/
<span class="nb">mkdir </span>rpi-yocto-bsp 
<span class="nb">cd </span>rpi-yocto-bsp/
</code></pre></div></div>

<h3 id="download-required-repositories">Download required repositories</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>sources
<span class="nb">cd </span>sources/

git clone <span class="nt">-b</span> kirkstone <span class="nt">--depth</span><span class="o">=</span>1 git@github.com:yoctoproject/poky.git
</code></pre></div></div>
<p>The general hardware specific BSP overlay for the RaspberryPi device.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone -b kirkstone --depth=1 https://git.yoctoproject.org/meta-raspberrypi
</code></pre></div></div>
<p>A collection of layers to suppliment OE-Core with additional packages, we will need a few layers from it.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone -b kirkstone --depth=1 https://git.openembedded.org/meta-openembedded
</code></pre></div></div>

<h2 id="setup-build-environment">Setup Build Environment</h2>

<h3 id="initialize-build-environment">Initialize build environment</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source poky/oe-init-build-env rpi-build
</code></pre></div></div>

<h3 id="add-required-layers">Add required layers</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bitbake-layers add-layer ../sources/meta-raspberrypi
bitbake-layers add-layer ../sources/meta-openembedded/meta-python
bitbake-layers add-layer ../sources/meta-openembedded/meta-oe
bitbake-layers add-layer ../sources/meta-openembedded/meta-multimedia
</code></pre></div></div>

<h3 id="build-configuration-files">Build configuration files</h3>
<h4 id="confbblayersconf">conf/bblayers.conf:</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf    
# changes incompatibly
POKY_BBLAYERS_CONF_VERSION = "2" 

BBPATH = "${TOPDIR}"
BBFILES ?= ""

BBLAYERS ?= " \ 
  /home/eric/rpi-yocto-bsp/sources/poky/meta \
  /home/eric/rpi-yocto-bsp/sources/poky/meta-poky \
  /home/eric/rpi-yocto-bsp/sources/poky/meta-yocto-bsp \
  /home/eric/rpi-yocto-bsp/sources/meta-raspberrypi \
  /home/eric/rpi-yocto-bsp/sources/meta-openembedded/meta-oe \
  /home/eric/rpi-yocto-bsp/sources/meta-openembedded/meta-python \
  /home/eric/rpi-yocto-bsp/sources/meta-openembedded/meta-multimedia \
  "
</code></pre></div></div>

<h4 id="conflocalconf">conf/local.conf</h4>
<p>Include the following packgages:</p>
<ul>
  <li><strong><a href="https://wiki.archlinux.org/title/Systemd">systemd</a></strong>: a system and service manager includes <a href="https://wiki.archlinux.org/title/Udev#">udev</a> reponsible for detecting ALSA audio devices on the system.</li>
  <li><strong><a href="https://www.freedesktop.org/wiki/Software/PulseAudio/">PulseAudio</a></strong>: a sound server system for transferring audio to a different machine.</li>
  <li><strong>Bluez5</strong>: provides support for the core Bluetooth layers and protocols.</li>
  <li><strong><a href="https://github.com/openembedded/meta-openembedded/blob/master/meta-oe/recipes-connectivity/packagegroups/packagegroup-tools-bluetooth.bb">packagegroup-tools-bluetooth</a></strong>: includes bluetooth specific tools and PulseAudio modules for BlueZ at runtime.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MACHINE ??= "raspberrypi3-64"

DISTRO_FEATURES:append = " systemd pulseaudio bluetooth alsa"
IMAGE_INSTALL:append = " pulseaudio pulseaudio-server packagegroup-tools-bluetooth alsa-utils alsa-plugins bluez5"
DISTRO_FEATURES_BACKFILL_CONSIDERED += " sysvinit"
VIRTUAL-RUNTIME_init_manager = "systemd"
VIRTUAL-RUNTIME_initscripts = "systemd-compat-units"
</code></pre></div></div>

<h5 id="note">Note</h5>
<ul>
  <li>The <code class="language-plaintext highlighter-rouge">alsa-utils</code> package contains (among other utilities) the <a href="https://man.archlinux.org/man/alsamixer.1">alsamixer</a> and <a href="https://man.archlinux.org/man/amixer.1">amixer</a> utilities. <code class="language-plaintext highlighter-rouge">amixer</code> is a shell command to change audio settings, while <code class="language-plaintext highlighter-rouge">alsamixer</code> provides a more intuitive ncurses based interface for audio device configuration.</li>
  <li>The <code class="language-plaintext highlighter-rouge">alsa-plugins</code> package enables <a href="https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture#Upmixing/downmixing">upmixing/downmixing</a> and other advanced features for high quality resampling.</li>
  <li><code class="language-plaintext highlighter-rouge">alsa-plugins</code> package is optional here.</li>
</ul>

<h3 id="deploy-image">Deploy image</h3>

<h4 id="build-image">Build Image</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bitbake core-image-base
</code></pre></div></div>

<h4 id="flash-image-to-sd-card">Flash image to SD Card</h4>
<p>Replace /dev/sdX with the appropriate device identifier for your SD card.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bzcat ./tmp/deploy/images/raspberrypi3-64/core-image-base-raspberrypi3-64.wic.bz2 | sudo dd of=/dev/sdX bs=1M conv=fsync &amp;&amp; sync
</code></pre></div></div>

<h2 id="runtime-configuration">Runtime Configuration</h2>
<p>Boot up your Raspberry Pi from the sd card.</p>

<h3 id="system">System</h3>
<h4 id="check-bluetooth-controller">Check Bluetooth Controller</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ hciconfig
hci0:   Type: Primary  Bus: UART
        BD Address: B8:27:EB:7C:97:71  ACL MTU: 1021:8  SCO MTU: 64:1
        UP RUNNING PSCAN 
        RX bytes:1639 acl:0 sco:0 events:107 errors:0
        TX bytes:3597 acl:0 sco:0 commands:107 errors:0
</code></pre></div></div>
<h4 id="check-sound-card-kernel-module-is-loaded">Check sound card kernel module is loaded</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># lsmod | grep snd*
snd_soc_hdmi_codec     20480  0
snd_bcm2835            28672  0
</code></pre></div></div>
<h3 id="pulseaudio">PulseAudio</h3>
<h4 id="load-modules">Load modules</h4>
<p>Whenever a new sink or source appears, the <code class="language-plaintext highlighter-rouge">module-switch-on-connect</code> module will switch the default sink/source to be the new sink/source. It is optional to load this module or set default sink/source device manually.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vi /etc/pulse/default.pa
</code></pre></div></div>

<p>Add the following line:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>load-module module-switch-on-connect
</code></pre></div></div>
<p>Refer <a href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/#module-switch-on-connect">module-switch-on-connect</a> for more info.</p>

<h4 id="audio-playback-and-latency-configuration">Audio Playback and Latency configuration</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi /etc/pulse/daemon.conf
</code></pre></div></div>
<p>Add the following lines:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resample-method=ffmpeg
enable-remixing = no
enable-lfe-remixing = no
default-sample-format = s32le
default-sample-rate = 192000
alternate-sample-rate = 176000
default-sample-channels = 2
exit-idle-time = -1
default-fragment-size-msec = 15
</code></pre></div></div>

<h4 id="start-pulseaudio-daemon">Start PulseAudio daemon</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pulseaudio --start
</code></pre></div></div>

<h4 id="check-pulseaudio-cards">Check PulseAudio cards</h4>
<p>Make sure that PulseAudio cards have been created for ALSA cards.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ pactl list modules short

...
7       module-alsa-card        device_id="0" name="platform-bcm2835_audio" card_name="alsa_card.platform-bcm2835_audio" namereg_fail=false tsched=no fixed_latency_range=no ignore_dB=no deferred_volume=yes use_ucm=yes avoid_resampling=no card_properties="module-udev-detect.discovered=1"
8       module-alsa-card        device_id="1" name="platform-bcm2835_audio" card_name="alsa_card.platform-bcm2835_audio" namereg_fail=false tsched=no fixed_latency_range=no ignore_dB=no deferred_volume=yes use_ucm=yes avoid_resampling=no card_properties="module-udev-detect.discovered=1"
...
</code></pre></div></div>
<p>Refer <a href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/#module-alsa-card">module-alsa-card</a> for more details.</p>

<h5 id="note-1">Note</h5>
<p><a href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/#module-udev-detect">module-udev-detect</a> will look for the supported cards and then select the profile you want automatically.</p>

<h3 id="alsa">ALSA</h3>
<h4 id="unmuting-the-channels">Unmuting the channels</h4>
<p>By default, ALSA has all channels muted. Those have to be unmuted manually. Unmuting the sound card’s master volume can be done by using amixer:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ amixer sset Master unmute
</code></pre></div></div>
<p>Refer <a href="https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture#Unmuting_the_channels">ALSA: Unmuting the channels</a> for more details.</p>

<h3 id="bluetooth">Bluetooth</h3>
<h4 id="start-bluetooth">Start Bluetooth</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl start bluetooth
</code></pre></div></div>
<h4 id="connect-bluetooth-with-phone">Connect Bluetooth with Phone</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bluetoothctl
[bluetooth]# agent on
[bluetooth]# default-agent
[bluetooth]# discoverable on
[bluetooth]# scan on
pair XX:XX:XX:XX:XX:XX
connect XX:XX:XX:XX:XX:XX
trust XX:XX:XX:XX:XX:XX
</code></pre></div></div>
<h4 id="check-pulseaudio-modules">Check PulseAudio modules</h4>
<p><code class="language-plaintext highlighter-rouge">module-bluez5-device</code> is responsible for managing Bluetooth audio devices, while <code class="language-plaintext highlighter-rouge">module-loopback</code> creates a loopback audio connection, allowing audio to be routed from one source to another within the PulseAudio sound server.</p>

<p>Make sure these two modules are loaded:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ pactl list modules short
...
22      module-bluez5-device    path=/org/bluez/hci0/dev_&lt;MAC_ADDR&gt; autodetect_mtu=1 output_rate_refresh_interval_ms=500 avrcp_absolute_volume=1
23      module-loopback source="bluez_source.&lt;MAC_ADDR&gt;.a2dp_source" source_dont_move="true" sink_input_properties="media.role=music"

</code></pre></div></div>

<h4 id="list-available-bluetooth-a2dp-audio-sources">List available Bluetooth A2DP audio sources</h4>
<p>Make sure the audio source from a Bluetooth A2DP audio stream is identified.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ pactl list sources short
0       alsa_output.platform-bcm2835_audio.stereo-fallback.monitor      module-alsa-card.c      s16le 2ch 192000Hz      SUSPENDED
1       alsa_output.platform-bcm2835_audio.stereo-fallback.2.monitor    module-alsa-card.c      s16le 2ch 192000Hz      SUSPENDED
2       bluez_source.&lt;MAC address&gt;.a2dp_source      module-bluez5-device.c  s16le 2ch 44100Hz       SUSPENDED
</code></pre></div></div>

<h4 id="list-available-audio-sinks">List available audio sinks</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ pactl list sinks short
0       alsa_output.platform-bcm2835_audio.stereo-fallback      module-alsa-card.c      s16le 2ch 192000Hz      SUSPENDED
1       alsa_output.platform-bcm2835_audio.stereo-fallback.2    module-alsa-card.c      s16le 2ch 192000Hz      RUNNING
</code></pre></div></div>
<h3 id="optional-setting">Optional setting</h3>
<h4 id="set-default-sinksource-devices-manually">Set default sink/source devices manually</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pactl set-default-source &lt;index|name&gt;
pactl set-default-sink &lt;index|name&gt;
</code></pre></div></div>

<p>Set the card profile as audio source device:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pactl set-card-profile &lt;index|name&gt; a2dp_source
</code></pre></div></div>

<h4 id="set-volume">Set Volume</h4>
<p>Adjust the volume level of an audio sink in PulseAudio to 100%. Replace &lt;index|name&gt; with the appropriate sink index or name.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pactl set-sink-volume &lt;index|name&gt; 100%
</code></pre></div></div>

<h2 id="debug">Debug</h2>
<h3 id="pulseaudio-troubleshooting">PulseAudio troubleshooting</h3>
<p>For connecting error, sound glitches or any other troubles, refer <a href="https://wiki.archlinux.org/title/bluetooth_headset#Troubleshooting_2">PulseAudio Bluetooth headset Troubleshooting</a>.</p>

<h2 id="conclusion">Conclusion</h2>
<p>By configuring PulseAudio and connecting via Bluetooth, you can now stream music wirelessly to your Raspberry Pi speaker.</p>

      </div>

      

      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
    <a href="https://twitter.com/intent/tweet?text=Raspberry+Pi+Bluetooth+Speaker%3A+A+Comprehensive+Guide&url=http%3A%2F%2Flocalhost%3A4000%2F2024-04-01-Raspberry-Pi-Bluetooth-Speaker-A-Comprehensive-Guide%2F"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fab fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
    <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2F2024-04-01-Raspberry-Pi-Bluetooth-Speaker-A-Comprehensive-Guide%2F"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fab fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2F2024-04-01-Raspberry-Pi-Bluetooth-Speaker-A-Comprehensive-Guide%2F"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fab fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

  

  

</section>



      

      <ul class="pagination blog-pager">
        
        <li class="page-item previous">
          <a class="page-link" href="/2024-02-26-Build-Linux-Distribution-for-NXP-iMX-8-with-Yocto-Project/" data-toggle="tooltip" data-placement="top" title="Build Linux Distribution for NXP i.MX 8 with Yocto Project">
            <i class="fas fa-arrow-left" alt="Previous Post"></i>
            <span class="d-none d-sm-inline-block">Previous Post</span>
          </a>
        </li>
        
        
      </ul>
      
  
  
  

  


  

  



    </div>
  </div>
</main>


  <footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      
<ul class="list-inline text-center footer-links"><li class="list-inline-item">
    <a href="mailto:ericlinsechs@gmail.com" title="Email me">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Email me</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://github.com/ericlinsechs" title="GitHub">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-github fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">GitHub</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://linkedin.com/in/eric-lin-a8a187248" title="LinkedIn">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">LinkedIn</span>
   </a>
  </li></ul>

      
      <p class="copyright text-muted">
      
        Eric Lin
        &nbsp;&bull;&nbsp;
      
      2024

      

      

      

      </p>
      <p class="theme-by text-muted">
        Powered by
        <a href="https://beautifuljekyll.com">Beautiful Jekyll</a>
      </p>
      </div>
    </div>
  </div>
</footer>


  
  
    
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>


  
    
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>


  
    
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


  



  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/beautifuljekyll.js"></script>
    
  









</body>
</html>
